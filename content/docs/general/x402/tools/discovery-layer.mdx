---
title: "x402 Discovery Layer"
description: "A discovery API for finding and registering x402-enabled resources on Polygon"
---

The x402 Discovery Layer is a searchable registry of all x402-compatible APIs and services running on Polygon networks. It enables developers and AI agents to discover paywall-protected resources through a simple REST API.

**Base URL:** `https://x402-discovery.up.railway.app`

## How to Use

### Step 1: Search for APIs

Find x402-enabled resources by searching with keywords, filtering by provider, or selecting a specific facilitator.

```bash
# Search for weather APIs
curl "https://x402-discovery.up.railway.app/discovery/resources?q=weather"
```

**Response:**
```json
{
  "data": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "resource": "https://api.weather.com/v1/current",
      "description": "Real-time weather data API",
      "provider": "WeatherCo",
      "facilitator": "polygon",
      "keywords": ["weather", "climate", "forecast"],
      "url": "https://docs.weather.com",
      "x402Version": 1,
      "schema": {
        "input": {
          "type": "http",
          "method": "GET",
          "queryParams": {
            "location": {
              "type": "string",
              "required": true,
              "description": "City name or coordinates"
            },
            "units": {
              "type": "string",
              "required": false,
              "description": "Temperature units (metric/imperial)"
            }
          }
        }
      }
    }
  ],
  "pagination": {
    "total": 1,
    "limit": 20,
    "offset": 0,
    "hasMore": false
  }
}
```

### Step 2: Review API Usage Schema

Check the `schema` field to understand how to call the API:

- **method**: HTTP method (GET, POST, etc.)
- **queryParams**: Query string parameters and their types
- **bodyParams**: Request body parameters (for POST/PUT)
- **required**: Whether a parameter is mandatory

The `url` field provides documentation links for more details.

### Step 3: Get Payment Requirements

To get current payment requirements, ping the x402 endpoint directly:

```bash
# Fetch payment details from the actual endpoint
curl "https://api.weather.com/v1/current"
```

**x402 Response (402 Payment Required):**
```json
{
  "x402Version": 1,
  "error": "X-PAYMENT header is required",
  "accepts": [
    {
      "scheme": "exact",
      "network": "polygon",
      "maxAmountRequired": "5000",
      "payTo": "0x1234567890123456789012345678901234567890",
      "maxTimeoutSeconds": 60,
      "asset": "0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359",
      "mimeType": "application/json",
      "resource": "https://api.weather.com/v1/current"
    }
  ]
}
```

**Why ping the endpoint?** Payment requirements can change dynamically (prices, recipient addresses, supported networks). Always fetch fresh payment data from the source.

### Step 4: Integrate with Your App

Use the discovered resource URL with your x402 client to make payments and access the API.

**TypeScript Example:**
```typescript
// 1. Discover the API
const response = await fetch(
  "https://x402-discovery.up.railway.app/discovery/resources?q=weather"
);
const { data } = await response.json();
const weatherAPI = data[0];

// 2. Read the schema to understand usage
console.log("API Method:", weatherAPI.schema.input.method);
console.log("Required params:", weatherAPI.schema.input.queryParams);

// 3. Use with x402 client
const apiResponse = await fetch(weatherAPI.resource + "?location=London");
// Handle 402 response and make payment with x402 client
```

### Step 5: Register Your API (Optional)

If you've built an x402-enabled service, register it to make it discoverable by others.

```bash
curl -X POST "https://x402-discovery.up.railway.app/discovery/resources" \
  -H "Content-Type: application/json" \
  -d '{
    "resource": "https://api.yourservice.com/v1/endpoint",
    "description": "Your service description",
    "provider": "Your Company Name",
    "facilitator": "polygon",
    "keywords": ["relevant", "keywords"],
    "url": "https://docs.yourservice.com",
    "x402Version": 1,
    "schema": {
      "input": {
        "type": "http",
        "method": "GET",
        "queryParams": {
          "param1": {
            "type": "string",
            "required": true,
            "description": "Parameter description"
          }
        }
      }
    }
  }'
```

**Success Response (201 Created):**
```json
{
  "message": "Resource registered successfully",
  "resource": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "resource": "https://api.yourservice.com/v1/endpoint",
    "description": "Your service description",
    "provider": "Your Company Name",
    "facilitator": "polygon",
    "keywords": ["relevant", "keywords"],
    "url": "https://docs.yourservice.com",
    "x402Version": 1,
    "schema": { ... }
  }
}
```

## API Reference

### Discovering APIs

#### Search All Resources

```bash
curl "https://x402-discovery.up.railway.app/discovery/resources?limit=10"
```

#### Search by Keywords

```bash
curl "https://x402-discovery.up.railway.app/discovery/resources?q=weather"
```

Searches across descriptions, provider names, and keywords with PostgreSQL full-text search.

#### Filter by Provider

```bash
curl "https://x402-discovery.up.railway.app/discovery/resources?provider=DappLooker"
```

#### Filter by Facilitator

```bash
curl "https://x402-discovery.up.railway.app/discovery/resources?facilitator=thirdweb"
```

**Available facilitators:** `polygon`, `polygon-amoy`, `thirdweb`, `pay-ai`, `x402-rs`, `corbits`, `questflow`, `other`

#### Combine Filters

```bash
curl "https://x402-discovery.up.railway.app/discovery/resources?q=crypto&facilitator=polygon&limit=5"
```

### Registering Your API

#### Prepare Your Resource

```json
{
  "resource": "https://api.yourservice.com/v1/endpoint",
  "description": "Clear description of what your API does",
  "mimeType": "application/json",
  "provider": "Your Company Name",
  "facilitator": "polygon",
  "keywords": ["relevant", "searchable", "keywords"],
  "url": "https://docs.yourservice.com",
  "x402Version": 1,
  "schema": {
    "input": {
      "type": "http",
      "method": "GET",
      "queryParams": {
        "param1": {
          "type": "string",
          "required": true,
          "description": "Parameter description"
        },
        "param2": {
          "type": "number",
          "required": false,
          "description": "Optional parameter"
        }
      }
    }
  }
}
```

**Key fields:**
- `resource` - Your x402 API endpoint URL (must be unique and return 402 responses)
- `description` - Clear description of what your API does
- `provider` - Your company or service name
- `facilitator` - Which facilitator you use (see list above)
- `keywords` - Array of searchable keywords
- `url` - Documentation URL for your API
- `x402Version` - x402 protocol version (currently 1)
- `schema` - API usage documentation showing how to call your endpoint
  - `method` - HTTP method (GET, POST, etc.)
  - `queryParams` or `bodyParams` - Parameter definitions
  - For each parameter: `type`, `required`, `description`

**Schema format for POST APIs:**
```json
{
  "input": {
    "type": "http",
    "method": "POST",
    "bodyParams": {
      "data": {
        "type": "string",
        "required": true,
        "description": "Input data"
      }
    },
    "headerFields": {
      "Content-Type": {
        "type": "string",
        "required": true,
        "description": "Must be application/json"
      }
    }
  }
}
```

#### Register Your Resource

```bash
curl -X POST "https://x402-discovery.up.railway.app/discovery/resources" \
  -H "Content-Type: application/json" \
  -d '{
    "resource": "https://api.yourservice.com/v1/endpoint",
    "description": "Your service description",
    "provider": "Your Company Name",
    "facilitator": "polygon",
    "keywords": ["relevant", "keywords"],
    "url": "https://docs.yourservice.com",
    "x402Version": 1,
    "schema": {
      "input": {
        "type": "http",
        "method": "GET",
        "queryParams": {
          "id": {
            "type": "string",
            "required": true,
            "description": "Resource identifier"
          }
        }
      }
    }
  }'
```

### Pagination

```bash
# Get first page (results 0-19)
curl "https://x402-discovery.up.railway.app/discovery/resources?limit=20&offset=0"

# Get second page (results 20-39)
curl "https://x402-discovery.up.railway.app/discovery/resources?limit=20&offset=20"
```

Response includes `total`, `limit`, `offset`, and `hasMore` fields.

## Developer Workflow

1. **Discover APIs** - Search the Discovery Layer for relevant x402 endpoints
2. **Read Schema** - Understand API parameters and usage from the `schema` field
3. **Ping Endpoint** - Fetch current payment requirements directly from the x402 endpoint
4. **Make Payment** - Use x402 client to create and send payment
5. **Call API** - Access the API with payment proof in headers

## Next Steps

- [x402 Protocol Guide](/general/x402/guides/introduction) - Learn more about x402
- [Build an x402 API](/general/x402/guides/providers/custom-resource) - Create your own x402-enabled service
